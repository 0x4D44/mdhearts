Hard AI Tuning Workflow

Goal
- Iteratively improve Hard continuation weights and branching knobs while preserving Normal goldens and keeping performance envelopes.

Workflow Steps
1) Gather disagreements
   - Run compare-batch across a range with deterministic mode:
     - `mdhearts.exe --compare-batch west 1000 200 --only-disagree --hard-deterministic --hard-steps 50 --out designs/tuning/compare_west_1000_200.csv`
   - Repeat for other seats/ranges; inspect CSV for interesting seeds.

2) Inspect and explain candidates
   - For a given seed/seat, print explanations and Hard stats:
     - `mdhearts.exe --explain-once 1040 west hard --hard-deterministic --hard-steps 80`
   - Enable verbose continuation breakdown to see parts (requires debug logs):
     - `MDH_DEBUG_LOGS=1 MDH_HARD_VERBOSE_CONT=1 mdhearts.exe --explain-once 1040 west hard`

3) Adjust tiny continuation weights conservatively
   - Env knobs (documented in README): `MDH_HARD_CONT_FEED_PERPEN`, `MDH_HARD_CONT_SELF_CAPTURE_PERPEN`, `MDH_HARD_QS_RISK_PER`, `MDH_HARD_CTRL_*`, `MDH_HARD_MOON_RELIEF_PERPEN`.
   - Example session:
     - `set MDH_HARD_CONT_FEED_PERPEN=70`
     - `set MDH_HARD_CONT_SELF_CAPTURE_PERPEN=85`
     - Re-run explain/compare for the scenario and verify deltas.

4) Lock behavior with goldens
   - For a disagreement worth preserving, add/extend tests under `crates/hearts-app/tests/`.
   - Prefer deterministic setups or known seeds; enable `MDH_HARD_DETERMINISTIC` and a step budget inside the test when needed.

5) Performance check
   - Run benches with optional guardrails:
     - `cargo bench -p hearts-app --bench heuristic_decision`
     - `MDH_BENCH_WARN_US_HARD=30000 cargo bench -p hearts-app --bench hard_decision`
   - Ensure typical Hard decisions remain well below 20â€“30ms under your chosen caps.

6) Optional breadth
   - Try adaptive/sampling/third-branch knobs with strict budgets:
     - Add flags to batch commands: `--hard-adaptive --hard-sample --hard-sample-n 2 --hard-branch-limit 10 --hard-next-branch-limit 5`.
   - If adopting new behavior, add tests/goldens and update README/docs.

Notes
- Popups are disabled for CLI by default. Keep `MDH_CLI_POPUPS` unset so output goes to the console during tuning.
- Use `--match-batch` to compare average round points for a seat across ranges:
  - `mdhearts.exe --match-batch west 1000 200 normal hard --out designs/tuning/match_west_1000_200.csv`

