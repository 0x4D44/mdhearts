# AI Improvements — Handoff Guide (2025‑10‑22)

Audience
- Maintainers/contributors picking up the AI work (Normal heuristic + Hard continuation/search scaffold).

Quick Repro
- Build and test: `cargo test --all`
- Show weights: `cargo run -p hearts-app -- --show-weights`
- One-shot explain (Normal): `cargo run -p hearts-app -- --explain-once 1040 west`
- One-shot explain (Hard, det): `MDH_HARD_DETERMINISTIC=1 MDH_HARD_TEST_STEPS=120 cargo run -p hearts-app -- --explain-once 1040 west hard --hard-verbose`

Evaluation
- Deterministic batch: `powershell -ExecutionPolicy Bypass -File tools/run_eval.ps1 -Verbose`
  - Writes compare/match CSVs and a summary under `designs/tuning/`.
- See `designs/2025.10.22 - Tuning Artifacts Index.md` for all artifact paths.

What’s Implemented
- Normal: leader-targeting, endgame nuance, void-aware follow-ups; env-tunable weights; detailed explain logs.
- Hard: deterministic budget, top‑K continuation, tiny continuation signals with cap, explain/JSON/verbose, env‑gated tie‑break; optional probe/pruning toggles.
- Tests: endgame goldens (QS and hearts), follow-up, leader-feed, moon relief/transition, constructed near‑tie goldens.

What’s Not Default
- Env‑gated knobs (tie‑break boost, probe/pruning toggles, some continuation weights) are off by default to preserve goldens.

Safe Next Steps
- Follow `designs/2025.10.22 - Stage 7 (Polish & Handoff) Plan.md`.
- If tuning further, prefer env-only tweaks + deterministic evaluation; promote defaults only if goldens stable and match summaries improve.

Notes
- Keep `MDH_CLI_POPUPS` unset for console-only output (avoids message boxes).
- Seeds in non-deterministic mode can vary by toolchain; use deterministic flags for reproducibility.