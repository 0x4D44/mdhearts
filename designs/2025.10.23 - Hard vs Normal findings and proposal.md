Summary
- Implemented and validated Stage 2–4 bot enhancements; added explain/compare tooling, goldens, and benches.
- Built and enabled strict flip golden (deterministic ordering flip using only determinization sampling with fixed weights).
- Added a Hard-only default determinization gate (MDH_HARD_DET_DEFAULT_ON) that keeps explain deterministic and adheres to strict budgets.
- Ran broad deterministic mixed-seat evaluations across seats, windows (1000..1999, 2000..2999), and mixes (NNHH, HHNN, NHNH, HNHN) with:
  - Determinization OFF (baseline),
  - Determinization ON (K=3 and K=5),
  - Hard-only nudges (conservative + stronger, still capped),
  - Wide-tier-only PhaseB top‑K/nextM overrides via env.
- Across these runs, Hard ≈ Normal in aggregate (means match to 3 decimals in tested windows). This is consistent with tiny continuation weights and strict caps designed not to destabilize Normal.

What’s working
- Determinization flips the intended near‑tie scenario (strict flip golden is green) without changing weights mid-test.
- Tooling supports deterministic evaluation (caps + seeds), wide-tier env knobs, and CI-style summaries.
- All goldens and tests remain stable across edits.

Gaps / why aggregates don’t move yet
- Continuation weights are intentionally small and capped; single-trick rollouts (with tiny probes) rarely shift the base ordering enough to move aggregates across random seeds.
- Determinization K=3..5 under strict budgets limits sample variance; helpful for near-ties but insufficient to move large windows by ≥1 pt/hand.
- Probe/branching remains shallow by design for performance; Wide-tier-only adjustments (top‑K/nextM) under env haven’t altered aggregates in small slices.

Proposal (guarded, staged)
1) Keep Hard default determinization as an optional gate (MDH_HARD_DET_DEFAULT_ON) for tuning and evaluation; do not promote as a default yet.
2) Pursue small, budgeted expansions that respect determinism and guardrails:
   - A. Slight PhaseB top‑K widen under Wide tier (now supported via MDH_HARD_WIDE_PHASEB_TOPK) with strict continuation cap.
   - B. Minimal next3 selective branching (choose-only) retained under caps; consider enabling for Narrow/Normal only in high-leverage positions.
   - C. Small increase to continuation weights within existing cont_cap (e.g., feed/self‑cap per‑penalty +5–10%), coupled with goldens and CI checks.
   - D. (Optional) Determinization K defaults at 3 for Hard with per-seat budget telemetry; keep explain deterministic.
3) Acceptance for a promotion:
   - Goldens remain green; strict flip golden continues to pass.
   - Mixed-seat CI (n≥1000/seat) shows a consistent Hard advantage with mean ≥ +1.0 pt/hand and CI lower bound ≥ +0.3 across at least two windows.
   - Bench p95 within target envelopes.

Execution plan (2–3 short iterations)
- Iteration 1 (env-only tuning):
  - Use MDH_HARD_WIDE_PHASEB_TOPK and tiny continuation bumps within cap (MDH_HARD_CONT_* envs) to explore deltas; rely on strict flip golden.
  - Evaluate with n≥1000/seat per window; capture CI summary.
- Iteration 2 (choose-only branching polish):
  - Add a small, leverage-gated next3 selective branch in Normal tier under caps (env gated).
  - Re-evaluate aggregates; watch goldens closely.
- Iteration 3 (consider promotion):
  - If gains meet acceptance, propose promoting tiny defaults (e.g., K=3 Hard-only determinization, slight Wide-tier top‑K, minor continuation bump) and update docs/goldens.

Risks / mitigations
- Risk: small behavioral changes break goldens. Mitigation: strict env gates, flip golden, CI-scale evaluation before promoting defaults.
- Risk: performance regressions. Mitigation: caps + telemetry; use bench-check and warn thresholds.

Deliverables
- CI summaries for each iteration, updated goldens as needed, concise change logs in docs/README, and journal entries.
