Hard Advantage — Next Steps Plan (2025‑10‑24)

Goals
- Achieve a consistent Hard > Normal advantage of ≈1–2 points/hand in mixed-seat evaluations while:
  - Keeping all existing goldens green and explain output deterministic.
  - Maintaining performance within typical < 20–30 ms/decision envelopes for Hard choose.
  - Preserving Normal behavior and prior endgame/moon semantics.

Acceptance Criteria
- Mixed-seat evaluations (NNHH, HHNN, NHNH, HNNH) across all seats with deterministic caps show:
  - Overall mean delta (b_pen − a_pen) ≤ −1.0 and CI95 lower bound ≤ −0.3 over ≥1000 seeds/seat across two disjoint windows.
- No golden/test regressions; benches within target envelopes; CLI/docs updated.

Workstreams and Steps

1) Evaluation Expansion and Telemetry
- Mixed-seat harness runs (deterministic):
  - Seats: west, north, east, south; mixes: NNHH, HHNN, NHNH, HNNH.
  - Windows: 1000..1999 and 2000..2999; n ≥ 1000 per seat per mix.
- Artifacts: per-run CSVs + consolidated Markdown with mean + 95% CI.
- Telemetry: record Hard stats (scanned, elapsed, utilization, tier, limits, next3_tiny_hits).
- CI: optional smoke (tiny n) to ensure tooling/flags stay wired.

2) Hard choose-only tuning (env-first, then defaults if warranted)
- Wide-tier deepening under cap:
  - Increase PhaseB top‑K (≤12) and next‑trick probe M (≤6) only for Tier::Wide.
  - Maintain explain determinism (no deepening), choose-only uses deepening.
- Continuation scaling and cap:
  - Slightly scale feed/self-capture continuation by penalties_on_table; keep MDH_HARD_CONT_CAP to bound effect.
- Planner-level tiny nudge (guarded):
  - Leader-target nudge when penalties_on_table>0, not capturing, unique leader, hearts broken (or non-heart lead), not first trick; only under Wide tier.
  - Keep magnitude below Normal’s endgame and leader-feed logic; off by default, env-gated during trials.
- Determinization tweaks:
  - K in {3,5}; keep probe widening small; next3 gating constrained by tier/budget; explain path remains deterministic.
- Trial matrix:
  - Run small grid of (topK, nextM, K, boosts, cap) within safe bounds; capture CSV + summary; pick best candidate set.

3) Tests/Goldens
- Constructed Wide-tier near‑tie golden where deepening (or determinization) flips top choice toward leader-feed (choose-only); Normal remains unchanged.
- Parity tests: explain vs choose — Hard choose top ∈ explain top‑K; explain remains deterministic across toolchains.
- Deterministic budget tests: step‑cap determinism stable with env gates; next3 tiny gate counter non-negative and small.
- Perf benches: report typical and p95 under trial knobs; warn if exceeding configured non-fatal thresholds.

4) Promotion and Docs
- Promotion gate: only promote a small subset of knobs to defaults when acceptance criteria are met and no tests regress.
- Docs: README + docs/CLI_TOOLS.md reflect any promoted defaults and evaluation guidance; add a short “Hard defaults gate” section.
- Tuning artifacts: preserve CSVs, summaries, and seeds files under designs/tuning/ with dates.

Sequence (2–3 iterations)
1. Run all-seats baseline + detk3; summarize.
2. Trial Wide-tier deepening (topK/nextM) within caps; re-run; summarize.
3. If still ≈0, trial small planner nudge (guarded) + mild continuation scaling under cap; re-run; summarize.
4. Add constructed golden(s) confirming intended flips; ensure stability across toolchains.
5. If criteria met, promote minimal defaults (choose-only); update docs and journal; keep explain deterministic for tuning.

Risks and Mitigations
- Aggregate gains remain small: mitigate by focusing on Wide-tier scenarios where leverage is high and point swings matter; keep trials conservative to avoid regressions.
- Explain vs choose divergence: retain explain determinism and document differences; add parity tests.
- Performance overhead: keep strict caps, step-based budgets in deterministic mode, and monitor benches; avoid “creeping” defaults without data.

Owner Notes
- All knobs remain env-driven during trials; defaults change only upon clear improvement.
- Keep MDH_CLI_POPUPS unset for automation to avoid dialogs; rely on console output and CSVs.
