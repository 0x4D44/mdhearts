# 2025.10.30 â€” Branch & Commit Plan (draft)

Branch
- Name: `feature/hard-stage1-2` (superseded by 2025.11.01 continue-on-main plan; see `designs/2025.11.01 - Commit Plan (Continue-On-Main).md`).
- Base: `main` (commit f3e2d685, 2025-10-28 11:37 UTC)

Suggested commit slices
1) docs: add recovery plan + stage1 archives README
- Add `designs/2025.10.30 - Post-Power-Cut WIP and Plan.md`
- Add `designs/tuning/stage1/README.md`
- Copy curated CSVs under `designs/tuning/stage1/`

2) tests: stage1/2 guard coverage scaffolding
- Add `crates/hearts-app/tests/todo_stage1_stage2.rs` with initial ignored placeholders

3) tests: stage1 guard + flat-scores inference
- Implement `hard_guard_round_leader_saturated_blocks_feed`
- Implement `hard_flat_scores_uses_round_leader_penalties_gt0`
- Implement `hard_flat_scores_uses_round_leader_penalties_eq0`

4) tests: stage2 over-cap clean-trick avoidance
- Implement `stage2_avoid_clean_capture_when_over_cap`
- Leave follower-path heavy-dump test as `#[ignore]` (policy allows QS fallback)

5) tools/docs: fast smokes + recipes
- Add `tools/smoke_fast.sh`
- Add `docs/CLI_TOOLS_SMOKE.md`
- README quick smoke section

6) artifacts: 1-seed smokes archived (NNHH/HHNN)
- Save `designs/tuning/stage1/smoke_release/*.csv`
- Note: small, single-row sanity files; acceptable to ship for demonstrative purposes

7) ci: add ultra-smoke job + validation
- Update `.github/workflows/ci.yml` with PR-only `ultra-smoke`
- Add `tools/check_smoke_artifacts.sh` and wire into job

8) docs: PR summary + archive temp notes
- Add `designs/2025.10.30 - Stage1+2 PR Summary.md`
- Copy `temp_doc.txt` to `designs/notes/2025.10.28 - Stage1 notes (from temp_doc).md`

Post-merge checklist
- Consider thresholds in `ultra-smoke` (e.g., assert CSV presence only; later add deltas).
- Run full deterministic sweeps locally (1K/200) before tagging a release.
