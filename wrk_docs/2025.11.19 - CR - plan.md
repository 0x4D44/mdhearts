# 2025-11-19 Code Review Plan – MDHearts Workspace

## Scope Overview
- Workspace contains three primary crates (`hearts-core`, `hearts-app`, `hearts-ui`), extensive tests under `crates/hearts-app/tests`, native Win32 platform code, CLI/telemetry utilities, and supporting docs/tools.
- Review must cover Rust safety, correctness, performance, UX, telemetry, docs, tooling, and pipeline health.

## Stage 1 – Repository Inventory & Context
1. Enumerate crates, binaries, and major directories.
2. Note compiler flags (`#![deny(warnings)]`, `.cargo/config`) and build/test tooling.
3. Capture existing CI/test matrix hints from `docs`, `.github`, and scripts.

## Stage 2 – hearts-core (Game Rules)
1. Review `model` module (Card, Hand, Trick, Round, Score, Passing, etc.) for rule fidelity, panics, and API hygiene.
2. Review `game` module (MatchState, serialization) for RNG usage, determinism, and snapshot safety.
3. Assess unit test coverage and identify edge cases (shoot moon, passing, scoring) not covered.

## Stage 3 – hearts-app (Controller, Bots, CLI, Platform)
1. **Controller & Telemetry:** Evaluate `controller.rs`, telemetry sink, think config, timeout handling, state transitions, and note concurrency/global state concerns.
2. **Bot system:** Inspect `bot` submodules (play planners, pass planner, tracker, search) for unsafe usage, determinism, and configurability.
3. **CLI & Dataset tooling:** Review `cli.rs`, dataset/export utilities, benches/tests for argument validation and error handling.
4. **Platform layer:** Sample Win32 host (`src/platform/win32.rs`) for unsafe boundaries, message loops, and resource management.

## Stage 4 – hearts-ui & Assets
1. Verify `hearts-ui` resource/theme loaders, placeholder manifests, and serialization.
2. Spot-check assets/licenses under `assets/`.

## Stage 5 – Tests, Tools, and Docs
1. Examine integration tests under `crates/hearts-app/tests` for determinism, flakiness triggers, and coverage gaps.
2. Review `tools/` scripts (eval, smoke) for safety and reproducibility.
3. Check documentation (`README.md`, `ARCHITECTURE.md`, changelog) for accuracy w/r to code.

## Stage 6 – Findings Consolidation & Recommendations
1. Summarize critical/high/medium issues across modules.
2. Highlight flaky tests/coverage blockers (e.g., telem sink globals).
3. Recommend remediation steps, tooling needs (coverage, deterministic seeds), and doc updates.

## Execution Notes
- Use journal `wrk_journals/2025.11.18 - JRN - impl.md` for time-stamped updates.
- All review artifacts, including final report, saved to `wrk_docs/` with naming `2025.11.19 - CR - <desc>.md`.
