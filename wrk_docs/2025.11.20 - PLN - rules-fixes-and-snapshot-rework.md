2025.11.20 - PLN - Rules Fixes & Snapshot Rework

Overview
Multistage implementation plan aligned with the 2025.11.20 HLD. Work in priority order: correctness (hearts-broken), snapshot fidelity, resilience, polish.

Stage 0 - Prep
- Re-read HLD and relevant code (`hearts-core::round`, `hearts-core::serialization`, `hearts-app::cli`, `controller`, batch loops).
- Decide enum naming for autoplay outcome and wording/default for `--legacy-ok` handling.

Stage 1 - Hearts-broken correctness
- Code: set `hearts_broken = true` when `card.is_penalty()` inside `RoundState::play_card`.
- Tests: add unit test showing QS breaks hearts and heart lead is then legal.
- Exit: `hearts-core` tests pass; new test green.

Stage 2 - Full-fidelity snapshots
- Data model: add `RoundSnapshot`; extend `MatchSnapshot` with `round` + `passing_index`.
- Capture/restore: implement `capture_full`/`restore_full`; update `MatchState::from_snapshot`.
- Legacy handling: `from_json` detects legacy (no `round`), warns; CLI flag `--legacy-ok` to allow legacy import.
- CLI: `--export-snapshot` uses full capture; add `--export-seed` (legacy). `--import-snapshot` expects full unless `--legacy-ok`. Update `--explain-snapshot` and help text.
- Storage: serialize hands sorted by suit then rank.
- Tests: round-trip snapshot fixture mid-round (passing pending and playing) ensuring legal moves, scores, hearts_broken, leader preserved. Legacy load warns.
- Exit: snapshot tests green; CLI help updated.

Stage 3 - Autoplay robustness
- API: change `autoplay_one` to return an enum (Played / SkippedTimeout / NoLegal / NotExpected).
- Callers: update batch sims (`simulate_one_round`, `_mixed`, compare/match commands) and tests to handle non-Played outcomes (fail-fast default; optional skip flag).
- Tests: force-timeout path (`MDH_TEST_FORCE_AUTOP_TIMEOUT=1`) ends loop with clear status.
- Exit: batch loops cannot hang; tests green.

Stage 4 - Status text polish
- Replace mojibake separator in `status_text` with `" | "`.
- Add a small assertion/snapshot test for the string.
- Exit: test green; manual spot-check output.

Stage 5 - Docs & fixtures
- Update README/CLI help if they mention snapshots.
- Add a sample full snapshot JSON fixture for tests.
- Keep HLD/plan pointers accurate.

Stage 6 - Verification
- Run `cargo test` (all crates).
- CLI smoke: export/import/explain snapshot fixture; small batch with timeout forced.
- Confirm Windows build path unaffected (only text separator change).

Risks/notes
- Snapshot schema change: protect legacy path, warn loudly.
- Autoplay enum ripple: keep names concise; document.
- Tracker serialization deferred; rely on recomputation from history.

Suggested commit flow
1) Stage 1 (rules) + test.
2) Stage 2 (snapshot schema + CLI) + tests + fixture.
3) Stage 3 (autoplay enum) + tests.
4) Stage 4 (status text) + test.
5) Stage 5/6 (docs + verification scripts).
